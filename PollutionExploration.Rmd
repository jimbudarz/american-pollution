---
title: "PollutionExploration"
author: "James Budarz"
date: "July 16, 2018"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(lubridate)
library(corrplot)
```

```{r loaddata, include=FALSE, cache = TRUE}
df = read.csv("PreppedPollutionData.csv", header = TRUE)
```

##Step 0: For exploratory purposes, just deal with Arizona data:
```{r DataReduction}
df = df %>% filter(State == "Arizona")
```

##Step 1: Clean the data
```{r DataCleaning}



```

##Step 2: Refine the data
```{r fetchlocation}


```

##Step 3: Make some plots of interest:
```{r Data Plotting}
gg <- ggplot(df)

gg + geom_point(aes(x = CO.Mean, y = NO2.Mean, color = City), size = .05) +
  ggtitle('NO2 Pollution Levels in Arizona')

gg + geom_point(aes(x = Date.Local, y = NO2.Mean, color = City), size = .05) +
  ggtitle('NO2 Pollution Levels in Arizona') +
  geom_smooth(aes(x = Date.Local, y = NO2.Mean, color = City), formula = y ~ sin(x) + x)

gg + geom_col(aes(x = month, y = NO2.Mean, fill = City), position = 'dodge') +
  ggtitle('NO2 Levels in AZ by Month')

gg + geom_boxplot(aes(x = City, y = NO2.Mean))

# Correlation of the different pollutants: CORRELATION DOESN'T CAPTURE SINE WAVES!
pollutantsonly = df %>% select('CO.AQI','O3.AQI','NO2.AQI','SO2.AQI') %>% filter(complete.cases(.))
corrplot(cor(pollutantsonly), order = "hclust")

```


